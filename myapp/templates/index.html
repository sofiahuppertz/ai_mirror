<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, width=device-width">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <title>AI MIRROR</title>
</head>

<body>
    <div id="header">
        <h1>AI MIRROR by Sebastian Errazuriz </h1>
    </div>
    <div id="book-container">
        <div id="book">
            <form action="{{ url_for('page', page_number=session['page_num'])}}" method="POST">
                <div>
                    <div id="question">
                        <h2>{{ question }}</h2>
                   </div>
                   <div id="answer">
                       <p>{{ answer }}</p>
                   </div>
                </div>
                <div class="page-buttons">
                    <button type="submit" class="btn btn-outline-dark" name="action" value="previous">Previous Page</button>
                    <button type="submit" class="btn btn-outline-dark" name="action" value="next">Next Page</button>
                </div>
            </form>
        </div>
    </div>
    <div>
        <form id="chatbot-button">
            <button type="submit" class="btn" name="action" value="chatbot"><img src="../static/chatbot.jpg" style="max-width: 80px;"></button>
    </div>
    <div id="chatbot-container">
        <div id="header-section">
            <div id="close-chatbot-button">
                <button type="submit" class="btn" name="action" value="close-chatbot">x</button>
            </div>
        </div>
        <div id="chatbot-title">
            <h3>Crowdsourcing human intelligence to face A.I</h3>
        </div>
        
        <div id="chat-history">
            <!-- Chat history will be displayed here -->
        </div>
        <div id="input-container">
            <div id="before-chat">
                <form action="/chatbot" method="POST" class="conversation-starters">
                    <button type="submit" class="btn btn-outline-dark" name="action" value="client_answer">ADD TO THIS ANSWER</button>
                    <button type="submit" class="btn btn-outline-dark" name="action" value="client_question">HAVE A NEW QUESTION?</button>
                </form>
            </div>
            <div id="chat-inputs">
                <div id="reset-chat">
                    <button type="submit" class="btn btn-danger reset-button" name="button" value="reset">Reset Chat</button>
                </div>
                <form action="/chatbot" method="POST" id="user-input">
                    <textarea rows="2" id="userInput" name="userInput"></textarea>
                    <button type="submit" class="btn" name="action" value="client_input">
                        <img src="../static/send-icon-2048x1863-u8j8xnb6.png" width="28px" alt="Send">
                    </button>
                </form>
                <form action="/chatbot" method="POST" id="yes-no-form">
                    <button type="submit" class="btn btn-lg btn-success yes-button" name="button" value="Yes">Yes</button>
                    <button type="submit" class="btn btn-lg btn-danger no-button" name="button" value="No">No</button>
                </form>
            </div>
        </div>
    </div>
    <style>

        

                #header {
                    text-align: center;
                    padding-top: 20px;
                }

                #book-container{
                    padding: 15%;
                    padding-top: 5%;
                    padding-bottom: 10%;
                    display: block;
                }
                
                #answer {
                    padding-top: 0px;
                    font-size: 18px;
                }

                .btn {
                    border-radius: 30px;
                }

                .page-buttons {
                    display: flex;
                    justify-content: center;
                    gap: 15px;
                }

                #chatbot-button {
                    position: fixed;
                    left: 77vw;
                    bottom: 1vw;
                    z-index: 1;
                }

                
                #chatbot-container {
                    background-color: rgb(255, 254, 254);
                    
                    border-radius: 15px;
                    box-shadow: 0px 0px 10px rgba(33, 33, 33, 0.5); 
                    height: 90%;
                    width: 90%;
                    top: 5%; 
                    left: 0;
                    right: 0;
                    margin: 0 auto;
                    padding: 5px;
                    padding-bottom: 15px;
                    position: fixed;
                    display: none;
                    flex-direction: column;
                    align-items: center;   
                    overflow: auto;
                }
                
                #header-section {
                    display: flex;
                    width: 100%;
                    justify-content: flex-start;
                }
                
                .spacer {
                    flex-grow: 1;
                }
                
                #close-chatbot-button {
                    top: 1vw;
                    left: 1vw;
                    color: rgb(44, 44, 44);
                    border-color: #ffc107;
                    background-color: #ffc107;
                    border-radius: 15px;
                }
                
                #chatbot-title {
                    text-align: center;
                    width: 100%;
                    margin-top: 5px;
                }
                
                #input-container {
                    width: 100%;
                    margin-top: auto;
                }

                #before-chat {
                    justify-content: space-evenly;
                }
               
                #chat-history { 
                    overflow-y: auto;
                    border: 1px solid transparent; /* Invisible border */
                    border-radius: 30px;
                    display: block;
                    flex-direction: column;
                    justify-content: flex-end;
                    align-items: center;
                }
            
                .chatbot_response {
                    float: left;
                    clear: both;
                    border: 1px solid black;
                    border-radius: 20px;
                    margin: 10px;
                    margin-right: 80px;
                    padding: 10px;
                }
            
                .user_message {
                    float: right;
                    clear: both;
                    border: 1px solid black;
                    border-radius: 15px;
                    margin: 10px;
                    margin-left: 80px;
                    padding: 10px;
                }
            
                #chat-inputs {
                    display: none;
                    justify-content: flex-start;
                    align-items: center;
                }
                .yes-button {
                    margin-right: 5px;
                    font-size: 20px;
                }
            
                .no-button {
                    margin-left: 5px;
                    font-size: 20px;
                }   
                .reset-button {
                    margin: 10px;
                    height: max-content;
                    border-radius: 15px;
                }
                
                #user-input {
                    flex-grow: 1;
                }

                #userInput {
                    width: 300px;
                    border-radius: 15px;
                    background-color:rgb(252, 252, 247);
                    border: 1px solid rgb(0, 0, 0);
                }
            
                #yes-no-form {
                    display: none;
                    justify-content: center;
                }

            

    </style>
    <script type="module" src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>